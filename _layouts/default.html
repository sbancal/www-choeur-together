<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title | default: site.title }}</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ '/favicon.ico' | relative_url }}"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{{ '/favicon.ico' | relative_url }}"
    />
    <link
      rel="stylesheet"
      href="{{ '/assets/css/style.css' | relative_url }}"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <script>
      // Animate background position horizontally on scroll (main scroll)
      document.addEventListener("DOMContentLoaded", () => {
        const body = document.body;
        const main = document.querySelector("main");
        if (body.classList.contains("photo-bg") && main) {
          body.classList.add("scrolling-bg");
          const updateBg = () => {
            const scrollPercent =
              main.scrollTop / (main.scrollHeight - main.clientHeight);
            const xPos = Math.round(scrollPercent * 100);
            // Animate background for desktop browsers
            body.style.backgroundPosition = `${xPos}% top`;
            // Animate background for iOS Safari (and all browsers) using ::before
            body.style.setProperty("--bg-x-pos", `${xPos}%`);
            const before = document.createElement("style");
            before.innerHTML = `body.photo-bg::before { background-position: var(--bg-x-pos, left) top !important; }`;
            // Remove previous style if present
            const old = document.getElementById("bg-scroll-style");
            if (old) old.remove();
            before.id = "bg-scroll-style";
            document.head.appendChild(before);
          };
          main.addEventListener("scroll", updateBg);
          // Set initial position
          body.style.setProperty("--bg-x-pos", `0%`);
          const before = document.createElement("style");
          before.innerHTML = `body.photo-bg::before { background-position: var(--bg-x-pos, left) top !important; }`;
          before.id = "bg-scroll-style";
          document.head.appendChild(before);
        }
      });
    </script>
  </head>

  <body class="work-sans-100 bg-gray-100 text-xl lg:text-2xl photo-bg">
    <header></header>
    <main class="flex flex-col items-center text-white">
      <div class="chapter chapter-header">
        <h1 class="section">
          C&nbsp;H&nbsp;O&nbsp;E&nbsp;U&nbsp;R&nbsp;
          &nbsp;T&nbsp;O&nbsp;G&nbsp;E&nbsp;T&nbsp;H&nbsp;E&nbsp;R
        </h1>
      </div>
      <div class="text-justify">{{ content }}</div>
      <div class="chapter chapter-footer">
        <div class="section">
          &laquo; {{ site.description }} &raquo; <br />
          Ouest-Lausannois â€¢ {{ site.time | date: "%Y" }}
        </div>
      </div>
    </main>
  </body>
</html>
