<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title | default: site.title }}</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ '/favicon.ico' | relative_url }}"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{{ '/favicon.ico' | relative_url }}"
    />
    <link
      rel="stylesheet"
      href="{{ '/assets/css/style.css' | relative_url }}"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Parisienne&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100 in-progress-decor">
    <!-- Header pinned to top -->
    <header class="w-full top-0 left-0 z-20">
      <div class="max-w-3xl mx-auto flex flex-col items-center py-6">
        <h1 class="parisienne-400 text-7xl mb-2">{{ site.title }}</h1>
        <nav class="flex gap-4 mt-2">
          <a
            href="#"
            data-section="accueil"
            class="menu-link font-medium text-gray-400"
          >
            Accueil
          </a>
          <a
            href="#"
            data-section="qui-sommes-nous"
            class="menu-link font-medium text-gray-400"
          >
            Qui sommes-nous
          </a>
          <a
            href="#"
            data-section="notre-histoire"
            class="menu-link font-medium text-gray-400"
          >
            Notre histoire
          </a>
          <a
            href="#"
            data-section="rejoins-nous"
            class="menu-link font-medium text-gray-400"
          >
            Rejoins-nous
          </a>
          <a
            href="#"
            data-section="contact"
            class="menu-link font-medium text-gray-400"
          >
            Contact
          </a>
        </nav>
      </div>
    </header>

    <main class="flex justify-center items-start">
      <div class="relative max-w-5xl w-full">
        <div
          id="top-blur"
          class="pointer-events-none absolute top-0 left-0 w-full h-24 bg-gradient-to-b from-white to-transparent z-10"
        ></div>
        <div
          id="bottom-blur"
          class="pointer-events-none absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-white to-transparent z-10"
        ></div>
        <div
          class="card bg-white rounded-xl shadow-2xl p-10 aspect-[1.65/1] text-gray-800 overflow-y-auto relative z-0"
        >
          {{ content }}
        </div>
      </div>
    </main>

    <footer class="w-full text-center mt-10 mb-5 text-gray-400 text-sm">
      <p>
        {{ site.description }} <br />
        Ouest-Lausannois â€¢ {{ site.time | date: "%Y" }}
      </p>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const links = document.querySelectorAll(".menu-link");
        function setActiveLink(selectedSection) {
          if (selectedSection === "accueil") {
            document.getElementById("top-blur").classList.add("hidden");
            document.getElementById("bottom-blur").classList.add("hidden");
          } else {
            document.getElementById("top-blur").classList.remove("hidden");
            document.getElementById("bottom-blur").classList.remove("hidden");
          }
          links.forEach((link) => {
            if (link.getAttribute("data-section") === selectedSection) {
              link.classList.remove("text-gray-400");
              link.classList.add("text-gray-900");
            } else {
              link.classList.remove("text-gray-900");
              link.classList.add("text-gray-400");
            }
          });
        }
        links.forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            const selected = link.getAttribute("data-section");
            document.querySelectorAll(".section").forEach((div) => {
              div.classList.add("hidden");
            });
            document.getElementById(selected).classList.remove("hidden");
            setActiveLink(selected);
            // Optional: scroll to section or close the menu on mobile
          });
        });
        // Set initial active link
        setActiveLink("accueil");
      });
    </script>
  </body>
</html>
